"""
背离技术分析 - 全局配置
基于《背离技术分析》(江南小隐 著) 的参数设定
"""

# ============================================================
# MACD 参数 (第三章)
# ============================================================
MACD_FAST = 12       # 快速EMA周期
MACD_SLOW = 26       # 慢速EMA周期
MACD_SIGNAL = 9      # 信号线(DEA)周期

# ============================================================
# 均线参数 (第二章第四/五节)
# ============================================================
MA_SHORT = 5         # 短周期均线
MA_MID = 10          # 中周期均线
MA_LONG = 30         # 长周期均线 (均线相交面积背离默认组合: 5+30)
MA_LONG2 = 60        # 超长周期均线
MA_LONG3 = 120       # 半年线
MA_LONG4 = 240       # 年线

# ============================================================
# KDJ 参数 (第五章第一节)
# ============================================================
KDJ_N = 9            # RSV计算周期
KDJ_M1 = 3           # K值平滑因子
KDJ_M2 = 3           # D值平滑因子
KDJ_OVERBOUGHT = 80  # 超买线
KDJ_OVERSOLD = 20    # 超卖线
KDJ_J_OVERBOUGHT = 100  # J线超买
KDJ_J_OVERSOLD = 0       # J线超卖

# ============================================================
# CCI 参数 (第五章第二节)
# ============================================================
CCI_N = 14           # CCI计算周期
CCI_SPRING = 100     # 春天线 (+100)
CCI_AUTUMN = -100    # 秋天线 (-100)

# ============================================================
# RSI 参数 (第五章第三节)
# ============================================================
RSI_SHORT = 6        # 短期RSI参数
RSI_LONG = 12        # 长期RSI参数
RSI_OVERBOUGHT = 80  # 超买区
RSI_OVERSOLD = 20    # 超卖区

# ============================================================
# 背离检测参数
# ============================================================
# 结构性顶底识别 (第二章: 峰线/谷线)
PEAK_WINDOW = 3      # 峰线/谷线识别窗口(三根K线)

# 趋势K线背离阈值 (第二章第一节)
KLINE_DIVERGENCE_BODY_RATIO = 0.02  # 强力K线实体占比阈值(2%)

# 趋势幅度背离 (第二章第二节)
AMPLITUDE_SHRINK_RATIO = 0.7   # 幅度缩小判定比例(后段/前段 < 0.7 视为背离)

# 时间度背离 (第二章第三节)
TIME_SHRINK_RATIO = 0.7        # 时间度缩小判定比例

# 均线相交面积背离 (第二章第五节)
MA_AREA_SHRINK_RATIO = 0.7     # 面积缩小判定比例

# 彩柱线长度/面积背离 (第三章第三/四节)
BAR_LENGTH_SHRINK_RATIO = 0.7  # 彩柱线长度缩小判定
BAR_AREA_SHRINK_RATIO = 0.7    # 彩柱线面积缩小判定

# 黄白线背离 (第三章第二节)
DIF_DEA_DIVERGENCE_RATIO = 0.9  # 黄白线高度/低度对比阈值

# 背驰条件 (第四章)
# 背驰需要: 至少一次隔堆背离 + MACD黄白线返回零轴
EXHAUSTION_MIN_SEPARATED_DIV = 1  # 产生背驰最少隔堆背离次数

# ============================================================
# 可视化参数
# ============================================================
CHART_STYLE = 'charles'         # mplfinance图表样式
CHART_FIGSIZE = (16, 12)        # 图表大小
DIVERGENCE_COLOR_TOP = 'red'    # 顶背离标记颜色
DIVERGENCE_COLOR_BOT = 'green'  # 底背离标记颜色
